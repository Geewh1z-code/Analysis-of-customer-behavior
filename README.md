# Анализ Поведения Клиентов и Эффективности Акционных Кампаний

Этот проект представляет собой комплексный анализ поведения клиентов и оценку эффективности маркетинговых акционных кампаний на основе транзакционных данных и информации о клиентах. Цель проекта — выявить привлекаемых клиентов, оценить их чувствительность к акциям и понять их покупательское поведение.

## Оглавление
- [Описание Проекта](#описание-проекта)
- [Данные](#данные)
- [Установка](#установка)
- [Использование](#использование)
- [Основные Анализы и Метрики](#основные-анализы-и-метрики)
- [Результаты и Выводы](#результаты-и-выводы)
- [Рекомендации](#рекомендации)
- [Технологии](#технологии)
- [Контакты](#контакты)

## Описание Проекта

В условиях постоянно растущей конкуренции, понимание поведения клиентов и оценка эффективности маркетинговых усилий являются ключевыми для успеха бизнеса. Этот проект фокусируется на:
1.  **Сегментации клиентов:** Определение "чувствительных" клиентов на основе их RFM-показателей и истории регистраций.
2.  **Анализе акционных кампаний:** Изучение покупательского поведения клиентов в день акции, как тех, кто был включен в акцию (`In_Action=1`), так и тех, кто не был (`In_Action=0`).
3.  **Привлечении новых клиентов:** Идентификация клиентов, которые совершили покупку в день акции и не имели истории покупок до этого.
4.  **Визуализации результатов:** Представление ключевых метрик и тенденций с помощью графиков.

Проект позволяет ответить на такие вопросы, как:
* Чем отличаются клиенты, участвовавшие в акции, от тех, кто не участвовал?
* Насколько эффективна акция в привлечении *новых* клиентов?
* Как чувствительные клиенты реагируют на акции по сравнению с нечувствительными?

## Данные

Проект использует два основных источника данных:

* `full_df.csv`: Детальные транзакционные данные, содержащие информацию обо всех покупках клиентов (дата, сумма, количество, ID продуктов и категорий, ID клиента).
* `actions.csv`: Данные об акционных кампаниях, содержащие информацию о клиентах, которые были включены в акцию (`In_Action=1`), дату акции и их покупки, связанные с акцией.
* `person_original_df.csv`: Данные о клиентах (ID клиента, возраст, пол, дата регистрации).

**Пример структуры данных:**

`full_df.csv`:
| Opetation_datetime | Purchase_ID | Amount | Qnt | Person_BKEY | Product_BKEY | cat_lev_01_bkey | ... |
|:-------------------|:------------|:-------|:----|:------------|:-------------|:----------------|:----|
| 2019-03-15         | 12345       | 1500.00| 3   | 1001        | 5001         | 1               | ... |

`actions.csv`:
| Person_BKEY | In_Action | Action_date | Sum_Purch_in_Action | Qnt_Purch_in_Action | Sum_from_Card |
|:------------|:----------|:------------|:--------------------|:--------------------|:--------------|
| 1001        | 1         | 2019-03-15  | 300.00              | 1                   | 10.00         |

`person_original_df.csv`:
| Person_BKEY | Age | Gend | Registration_Date |
|:------------|:----|:-----|:------------------|
| 1001        | 35  | F    | 2018-01-01        |

*(В случае отсутствия файлов, предусмотрены заглушки для демонстрации функционала.)*

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Geewh1z-code/Analysis-of-customer-behavior.git
    cd Analysis-of-customer-behavior
    ```

2.  **Создайте и активируйте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv venv
    # Для Windows:
    .\venv\Scripts\activate
    # Для macOS/Linux:
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
    (Если файла `requirements.txt` нет, его можно создать, выполнив `pip freeze > requirements.txt` после установки всех необходимых библиотек, таких как `pandas`, `numpy`, `matplotlib`, `seaborn`, `scipy`).

## Использование

Основной код для анализа содержится в Jupyter Notebook `Analysis of customer behavior.ipynb`.

1.  **Запустите Jupyter Notebook:**
    ```bash
    jupyter notebook
    ```
2.  Откройте файл `Analysis of customer behavior.ipynb` в браузере.
3.  Выполните ячейки по порядку. Убедитесь, что пути к вашим CSV-файлам данных (`full_df.csv`, `actions.csv`, `person_original_df.csv`) указаны корректно в начале ноутбука (переменная `DATA_DIR`).

## Основные Анализы и Метрики

Проект выполняет следующие ключевые шаги:

* **RFM-анализ:** Расчет показателей Recency, Frequency, Monetary для всех клиентов.
* **Определение "чувствительных" клиентов:** Клиенты с недавней регистрацией, низкой частотой покупок или высокой ретроспективной давностью последней покупки.
* **Объединение данных:** Слияние `actions.csv` с `full_df.csv` и `person_original_df.csv` для обогащения информации о клиентах и их транзакциях.
* **Анализ покупок в день акции:**
    * `Total_Amount_Action_Day_Full_DF`: Общая сумма покупок клиента в день акции (по всем транзакциям).
    * `Num_Purchases_Action_Day_Full_DF`: Количество уникальных покупок в день акции.
    * `Unique_Products_Action_Day_Full_DF`: Количество уникальных продуктов, купленных в день акции.
    * `Bought_Before_Action_Window`: Флаг, указывающий, совершал ли клиент покупки за 30 дней до акции.
* **Идентификация привлеченных клиентов:** Клиенты, которые купили в день акции, но не имели покупок за предыдущий 30-дневный период.
* **Визуализация:** Боксплоты и столбчатые диаграммы для сравнения поведения `In_Action=0` и `In_Action=1` групп, а также их чувствительных и нечувствительных сегментов.
* **Сводная таблица привлечения:** Агрегированные данные по количеству записей, уникальных клиентов, клиентов, совершивших любую покупку, и привлеченных новых клиентов, сгруппированные по участию в акции и чувствительности.

## Результаты и Выводы

На основе проведенного анализа данных получены следующие ключевые результаты:

**1. Общие объемы и уникальные клиенты:**
* Группы `In_Action = 0` и `In_Action = 1` по численности практически равны как среди нечувствительных (примерно 153.6 тыс. в каждой), так и среди чувствительных клиентов (примерно 96.2-96.4 тыс. в каждой). Это означает, что акция была охватывающей и применялась к значительному числу клиентов из обеих категорий.

**2. Покупательское поведение (метрики из `actions.csv`):**

* **`Sum_Purch_in_Action` (Сумма покупок в рамках акции):**
    * Для нечувствительных клиентов: `In_Action=1` (среднее: 752.48) значительно выше, чем `In_Action=0` (среднее: 0.00). Это ожидаемо, так как `Sum_Purch_in_Action` отражает покупки, *связанные с акцией*.
    * Для чувствительных клиентов: Аналогичная картина, `In_Action=1` (среднее: 489.28) существенно выше, чем `In_Action=0` (среднее: 0.00).
    * **Наблюдение:** Нечувствительные клиенты в акционной группе (`In_Action=1`) совершают покупки на более высокие суммы в рамках акции (752.48 vs 489.28), чем чувствительные клиенты.

* **`Qnt_Purch_in_Action` (Количество покупок в рамках акции):**
    * Аналогично `Sum_Purch_in_Action`, `In_Action=1` значительно выше, чем `In_Action=0` для обеих групп чувствительности.
    * **Наблюдение:** Нечувствительные клиенты (`In_Action=1`) также совершают большее количество покупок в рамках акции (1.61 vs 1.01) по сравнению с чувствительными клиентами.

* **`Sum_from_Card` (Сумма с карты):**
    * `In_Action=1` имеет существенно более высокие средние значения `Sum_from_Card` (нечувствительные: 124.96, чувствительные: 81.33) по сравнению с `In_Action=0` (везде 0.00). Это логично, если акция предполагает использование карты.
    * **Наблюдение:** Нечувствительные клиенты (`In_Action=1`) также показывают более высокую среднюю `Sum_from_Card` в акционных покупках.

**3. Покупательское поведение (метрики из `full_df` – все покупки в день акции):**

* **`Total_Amount_Action_Day_Full_DF` (Общая сумма покупок в день акции):**
    * Для нечувствительных клиентов: `In_Action=1` (среднее: 1269.80) почти вдвое выше, чем `In_Action=0` (среднее: 694.75). Это сильный показатель того, что акция стимулирует *общие* траты.
    * Для чувствительных клиентов: `In_Action=1` (среднее: 840.40) также значительно выше, чем `In_Action=0` (среднее: 457.10).
    * **Наблюдение:** Акция эффективно увеличивает общую сумму покупок в день акции как для чувствительных, так и для нечувствительных клиентов. Нечувствительные клиенты тратят больше.

* **`Num_Purchases_Action_Day_Full_DF` (Количество покупок в день акции):**
    * Тенденция аналогична `Total_Amount_Action_Day_Full_DF`: `In_Action=1` значительно увеличивает количество покупок по сравнению с `In_Action=0` для обеих групп. Нечувствительные клиенты совершают больше покупок.

* **`Unique_Products_Action_Day_Full_DF` и `Unique_cat_lev_XX_Action_Day_Full_DF`:**
    * Для всех уровней категорий и уникальных продуктов наблюдается аналогичная тенденция: группы `In_Action=1` демонстрируют значительно большее разнообразие покупок (больше уникальных продуктов и категорий) по сравнению с `In_Action=0`, как среди чувствительных, так и среди нечувствительных клиентов.
    * **Наблюдение:** Акция стимулирует не только объем, но и *широту* покупок, побуждая клиентов исследовать больше категорий и продуктов. Нечувствительные клиенты здесь также лидируют.

**4. Воронка привлечения (`funnel_summary`):**

| Participation_Group | Sensitive_Group | Total_Campaign_Records | Unique_Clients_in_Campaign | Clients_Made_Any_Purchase_Action_Day | Attracted_New_Clients_Any_Purchase |
|:--------------------|:----------------|:-----------------------|:---------------------------|:-------------------------------------|:-----------------------------------|
| In_Action = 0       | Нечувствительный| 153602                 | 153602                     | 83204                                | 48679                              |
| In_Action = 0       | Чувствительный  | 96416                  | 96416                      | 44026                                | 30971                              |
| In_Action = 1       | Нечувствительный| 153746                 | 153746                     | 113333                               | 57322                              |
| In_Action = 1       | Чувствительный  | 96236                  | 96236                      | 61972                                | 34484                              |

* **`Clients_Made_Any_Purchase_Action_Day` (Клиенты, совершившие хотя бы одну покупку в день акции):**
    * Для нечувствительных: `In_Action=1` (113333) значительно выше, чем `In_Action=0` (83204). Это показывает, что акция успешно конвертирует нечувствительных клиентов в покупателей в день акции.
    * Для чувствительных: `In_Action=1` (61972) также значительно выше, чем `In_Action=0` (44026). Акция работает и для чувствительных клиентов, хотя их абсолютное число меньше.
    * **Наблюдение:** Акция увеличивает конверсию в покупку в день акции для обеих групп.

* **`Attracted_New_Clients_Any_Purchase` (Привлеченные новые клиенты, совершившие любую покупку):**
    * Для нечувствительных: `In_Action=1` (57322) немного выше, чем `In_Action=0` (48679). Это указывает на то, что акция привлекает больше *новых* нечувствительных клиентов.
    * Для чувствительных: `In_Action=1` (34484) также немного выше, чем `In_Action=0` (30971). Аналогично, акция привлекает больше *новых* чувствительных клиентов.
    * **Наблюдение:** Акция демонстрирует эффект привлечения новых клиентов (тех, кто не покупал 30 дней до акции) в обеих группах чувствительности, причем эффект для нечувствительных клиентов в абсолютном выражении выше. Однако, процент привлеченных новых клиентов от общего числа совершивших покупку в день акции (Attracted_New_Clients / Clients_Made_Any_Purchase) остается достаточно близким для In_Action=1 (57322/113333 ~50.6% для нечувствительных, 34484/61972 ~55.6% для чувствительных) и для In_Action=0 (48679/83204 ~58.5% для нечувствительных, 30971/44026 ~70.4% для чувствительных). Это говорит о том, что даже без акции есть значительная доля клиентов, которые совершают свою первую покупку в этот период, но акция усиливает этот эффект.

**Общий вывод:**
Акционная кампания в целом демонстрирует положительное влияние на покупательское поведение: она увеличивает общую сумму покупок, количество покупок, разнообразие купленных товаров и категорий, а также приводит к большему числу конверсий в покупку в день акции. Акция также способствует привлечению "новых" клиентов (тех, кто не покупал за 30 дней до акции), хотя доля таких клиентов, совершающих покупки, также высока и без акции. Нечувствительные клиенты демонстрируют более высокие абсолютные показатели по всем метрикам вовлеченности и трат, но чувствительные клиенты также положительно реагируют на акции, иногда с более высокой долей "новых" привлеченных клиентов.

## Рекомендации

На основе выявленных закономерностей можно сформулировать следующие бизнес-рекомендации:

1.  **Продолжать акционные кампании, но с учетом сегментации:** Акции показывают общую эффективность в стимулировании покупок и привлечении новых клиентов. Стоит продолжать их проведение.
2.  **Целевая стратегия для нечувствительных клиентов:**
    * **Фокус:** Нечувствительные клиенты тратят больше и покупают больше разнообразных товаров в рамках акции. Они являются "локомотивом" в объеме продаж.
    * **Рекомендация:** Для этой группы можно экспериментировать с акциями, направленными на увеличение среднего чека (например, "купи на X, получи Y скидки на следующую покупку", акции 1+1 на более дорогие товары, бандлы). Также можно предлагать им новые или премиальные категории товаров.
3.  **Оптимизация привлечения чувствительных клиентов:**
    * **Фокус:** Чувствительные клиенты, несмотря на меньшие абсолютные траты, имеют хороший процент привлечения новых покупателей. Они могут быть более восприимчивы к "пробующим" предложениям.
    * **Рекомендация:** Для чувствительных клиентов рассмотреть акции с низким порогом входа, но с потенциалом повторных покупок (например, купоны на первую покупку, скидки на базовые/повседневные товары, персонализированные предложения на основе их (пусть и небольшой) истории покупок). Цель — превратить их в более лояльных и менее чувствительных клиентов в долгосрочной перспективе.
4.  **Анализ причин покупок "без акции" (`In_Action = 0`):**
    * **Фокус:** Значительное количество клиентов совершают покупки в день акции, даже если они не были включены в активную кампанию (`In_Action=0`), включая значительную долю "новых" клиентов.
    * **Рекомендация:** Провести дополнительный анализ:
        * Какие другие факторы могли стимулировать эти покупки (общие скидки, праздники, сезонность, внешняя реклама)?
        * Можно ли оптимизировать распределение бюджета, снизив охват `In_Action=1` в тех случаях, где "естественный" спрос уже высок, и перераспределить его на менее активные сегменты или более эффективные механики?
        * Изучить "органические" покупки клиентов в `In_Action=0` для выявления естественных драйверов роста.
5.  **Детальный анализ категории товаров:** Поскольку акция увеличивает разнообразие покупаемых категорий, следует проанализировать, какие именно категории товаров наиболее выигрывают от акций. Это поможет оптимизировать ассортимент для будущих кампаний.
6.  **Дальнейшая сегментация:** Если возможно, рассмотреть более гранулированную сегментацию чувствительных клиентов (например, "новые", "спящие", "теряющие лояльность") для разработки еще более точечных и персонализированных акционных предложений.

## Технологии

* Python 3.x
* Pandas
* NumPy
* Matplotlib
* Seaborn
* Jupyter Notebook

## Контакты

Если у вас есть вопросы или предложения, свяжитесь со мной:

* **Ваше имя:** Игорь Бабенков
* **GitHub:** [Ссылка на ваш профиль GitHub](https://github.com/Geewh1z-code)
* **Email:** permanent176@gmail.com
